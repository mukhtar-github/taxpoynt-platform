# ============================================================================
# TAXPOYNT PLATFORM - COMPREHENSIVE ENVIRONMENT CONFIGURATION
# ============================================================================
# This is the master template for all TaxPoynt environment variables
# Copy this to .env and replace all placeholder values with real ones
# 
# Sources consolidated from:
# - Previous .env.example, .env.correct-format
# - legacy/backend/railway.env.template  
# - legacy/backend/railway.firs.env.template
# - legacy/frontend/vercel.env.template
# - platform/tests/e2e/.env.example
# ============================================================================

# ============================================================================
# APPLICATION CORE CONFIGURATION
# ============================================================================

# Application Environment
APP_ENV=production                    # Options: development, staging, production
NODE_ENV=production                   # For frontend builds
APP_NAME=TaxPoynt Platform
APP_VERSION=1.0.0
DEBUG=false                           # Set to true for development only

# Security & Encryption - CRITICAL PRODUCTION SECURITY SETTINGS
# NEVER use default values in production - generate secure random values
SECRET_KEY=REPLACE_WITH_SECURE_SECRET_KEY_MIN_32_CHARS
JWT_SECRET_KEY=REPLACE_WITH_SECURE_64_CHARACTER_SECRET_IN_PRODUCTION  # Generate: python -c "import secrets; print(secrets.token_urlsafe(64))"
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60                    # Reduced from 30 to 60 for better UX, but secure
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30                      # Refresh tokens valid for 30 days
ENCRYPTION_KEY=REPLACE_WITH_BASE64_ENCODED_32_BYTE_KEY # Generate: python -c "import os,base64; print(base64.urlsafe_b64encode(os.urandom(32)).decode())"
MASTER_PASSWORD=REPLACE_WITH_SECURE_MASTER_PASSWORD   # Used for key derivation
ENCRYPTION_SALT=REPLACE_WITH_SECURE_SALT              # Used for PBKDF2 key derivation
API_KEY_SECRET=your_api_key_secret_for_authentication
CREDENTIAL_ENCRYPTION_KEY=your_credential_encryption_key_for_integrations

# API Configuration  
API_V1_STR=/api/v1
PORT=8000
ALLOWED_ORIGINS=https://your-frontend-domain.vercel.app

# ============================================================================
# DATABASE & CACHE CONFIGURATION
# ============================================================================

# PostgreSQL Database (Railway auto-provides DATABASE_URL)
DATABASE_URL=postgresql://user:password@localhost:5432/taxpoynt_platform
POSTGRES_SERVER=your-postgres-host
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_postgres_password
POSTGRES_DB=taxpoynt_platform

# Redis Cache (Railway auto-provides REDIS_URL)
REDIS_URL=redis://localhost:6379
REDIS_HOST=your-redis-host
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# ============================================================================
# FIRS INTEGRATION CONFIGURATION
# ============================================================================

# FIRS Production API (For Production Deployment)
FIRS_API_URL=https://api.firs.gov.ng/api/v1
FIRS_CLIENT_ID=your_production_firs_client_id
FIRS_CLIENT_SECRET=your_production_firs_client_secret
FIRS_API_KEY=your_production_firs_api_key
FIRS_API_SECRET=your_production_firs_api_secret

# FIRS Sandbox API (For Development & Testing)
FIRS_SANDBOX_URL=https://eivc-k6z6d.ondigitalocean.app
FIRS_SANDBOX_API_KEY=36dc0109-5fab-4433-80c3-84d9cef792a2
FIRS_SANDBOX_API_SECRET=mHtXX9UBq3qnvgJFkIIEjQLlxjXKS1yECpqmTWa1AuCzRg5sJNOpxDefCYds18WNma3zUUgt1ccIUOgNtBb4wk8s4MshQl8OxhQA
FIRS_USE_SANDBOX=true               # Set to false for production
FIRS_SANDBOX_ENABLED=true           # Enable sandbox mode

# FIRS Service Configuration
FIRS_SERVICE_ID=your_firs_service_id  # Example: 94ND90NR
FIRS_SUBMISSION_TIMEOUT=30
FIRS_RETRY_ATTEMPTS=3
FIRS_MAX_BATCH_SIZE=100
FIRS_CERTIFICATION_MODE=true         # For APP certification testing

# FIRS Webhooks
FIRS_WEBHOOK_SECRET=your_firs_webhook_secret_for_callbacks
WEBHOOK_BASE_URL=https://your-domain.com/webhooks

# ============================================================================
# BUSINESS SYSTEM INTEGRATIONS
# ============================================================================

# Odoo ERP Integration
ODOO_API_URL=https://your-odoo-instance.com
ODOO_HOST=your-odoo-instance.odoo.com
ODOO_PORT=443
ODOO_PROTOCOL=jsonrpc+ssl
ODOO_DATABASE=your_odoo_database
ODOO_USERNAME=your_odoo_username  
ODOO_PASSWORD=your_odoo_password
ODOO_API_KEY=your_odoo_api_key
ODOO_AUTH_METHOD=password
ODOO_DEFAULT_TIMEOUT=30
ODOO_CONNECTION_POOL_SIZE=5

# ============================================================================
# FRONTEND CONFIGURATION (Next.js/Vercel)
# ============================================================================

# Frontend URLs
FRONTEND_URL=http://localhost:3000                    # For backend CORS
NEXT_PUBLIC_API_URL=https://api.taxpoynt.com/api/v1  # Backend API URL

# Authentication & UI
NEXT_PUBLIC_AUTH_DOMAIN=your-app-domain.vercel.app
NEXT_PUBLIC_AUTH_STORAGE_PREFIX=taxpoynt_platform
NEXT_PUBLIC_DEFAULT_THEME=light
NEXT_PUBLIC_DEFAULT_TIME_RANGE=24h

# Feature Flags
NEXT_PUBLIC_ENABLE_REAL_TIME_MONITORING=false
NEXT_PUBLIC_ENABLE_ODOO_DIRECT_CONNECT=false  
NEXT_PUBLIC_ENABLE_ADVANCED_ANALYTICS=false
NEXT_PUBLIC_FIRS_API_SANDBOX_MODE=true

# ============================================================================
# NOTIFICATION & COMMUNICATION
# ============================================================================

# Email Service (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@taxpoynt.com
SMTP_PASSWORD=your_email_app_password
SMTP_TLS=True
EMAILS_FROM_EMAIL=noreply@taxpoynt.com
EMAILS_FROM_NAME=TaxPoynt Platform

# ============================================================================
# MONITORING & ANALYTICS
# ============================================================================

# Error Tracking & Monitoring
SENTRY_DSN=your_sentry_dsn_for_error_tracking
ANALYTICS_API_KEY=your_analytics_service_key
NEXT_PUBLIC_ANALYTICS_ID=your_analytics_tracking_id

# Logging Configuration
LOG_LEVEL=INFO                        # Options: DEBUG, INFO, WARNING, ERROR
LOG_DIR=/tmp/logs

# Rate Limiting
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# ============================================================================
# IRN & DOCUMENT PROCESSING
# ============================================================================

# IRN (Invoice Reference Number) Configuration
IRN_EXPIRY_DAYS=30
UBL_SCHEMA_PATH=schemas/ubl

# ============================================================================
# DEPLOYMENT CONFIGURATION
# ============================================================================

# Railway Deployment
RAILWAY_PROJECT_ID=your_railway_project_id

# Vercel Deployment  
VERCEL_PROJECT_ID=your_vercel_project_id

# ============================================================================
# TESTING CONFIGURATION (E2E Tests)
# ============================================================================

# Test Environment URLs
TEST_FRONTEND_URL=https://your-staging-frontend.vercel.app
TEST_BACKEND_URL=https://your-staging-api.railway.app/api/v1

# Test User Credentials
TEST_USER_EMAIL=test@taxpoynt.com
TEST_USER_PASSWORD=secure_test_password_here

# Test Odoo Configuration
TEST_ODOO_URL=https://your-test-odoo.odoo.com/odoo
TEST_ODOO_DB=your_test_odoo_database
TEST_ODOO_USER=test_odoo_username
TEST_ODOO_PASSWORD=test_odoo_password
TEST_INVOICE_ID=sample-test-invoice-id

# Test FIRS Configuration (Sandbox Only)
TEST_FIRS_API_KEY=36dc0109-5fab-4433-80c3-84d9cef792a2
TEST_FIRS_CLIENT_ID=your_test_firs_client_id
TEST_FIRS_CLIENT_SECRET=mHtXX9UBq3qnvgJFkIIEjQLlxjXKS1yECpqmTWa1AuCzRg5sJNOpxDefCYds18WNma3zUUgt1ccIUOgNtBb4wk8s4MshQl8OxhQA

# ============================================================================
# ADDITIONAL INTEGRATION PLACEHOLDERS
# ============================================================================

# SAP Integration (when needed)
# SAP_API_URL=https://your-sap-instance.com/api
# SAP_CLIENT_ID=your_sap_client_id
# SAP_CLIENT_SECRET=your_sap_client_secret

# QuickBooks Integration (when needed)  
# QB_CLIENT_ID=your_quickbooks_client_id
# QB_CLIENT_SECRET=your_quickbooks_client_secret
# QB_REDIRECT_URI=https://your-domain.com/auth/quickbooks/callback

# Salesforce Integration (when needed)
# SF_CLIENT_ID=your_salesforce_client_id
# SF_CLIENT_SECRET=your_salesforce_client_secret
# SF_USERNAME=your_salesforce_username
# SF_PASSWORD=your_salesforce_password

# Square POS Integration (when needed)
# SQUARE_APPLICATION_ID=your_square_application_id
# SQUARE_ACCESS_TOKEN=your_square_access_token
# SQUARE_ENVIRONMENT=sandbox  # or production

# Nigerian Payment Processors
# MONIEPOINT_API_KEY=your_moniepoint_api_key
# OPAY_MERCHANT_ID=your_opay_merchant_id
# PALMPAY_API_KEY=your_palmpay_api_key

# ============================================================================
# MONO OPEN BANKING INTEGRATION (Nigerian Banking)
# ============================================================================

# Mono API Credentials
MONO_SECRET_KEY=test_sk_sandbox_your_sandbox_key_here      # Sandbox: test_sk_* | Production: sk_*
MONO_APP_ID=test_app_sandbox_id_here                      # Your Mono application ID
MONO_ENVIRONMENT=sandbox                                   # Options: sandbox, production
MONO_WEBHOOK_SECRET=your_mono_webhook_secret_for_callbacks

# Mono Production Settings (for production deployment)
MONO_PRODUCTION_SECRET_KEY=sk_live_your_production_key_here
MONO_PRODUCTION_APP_ID=app_live_your_production_app_id
MONO_VERIFY_WEBHOOKS=true                                  # Enable webhook signature verification
MONO_AUTO_INVOICE=false                                    # Enable automatic invoice generation from transactions
MONO_MIN_INVOICE_AMOUNT=1000                              # Minimum NGN amount for invoice generation

# Mono Banking Features
MONO_MAX_CONCURRENT_REQUESTS=3                            # Max simultaneous API requests
MONO_DEFAULT_TRANSACTION_LIMIT=50                         # Default transactions per API call
MONO_CONNECTION_TIMEOUT=30                                # API timeout in seconds
MONO_RETRY_ATTEMPTS=3                                     # Number of retry attempts for failed requests

# Mono Webhook Configuration
MONO_WEBHOOK_URL=https://your-domain.com/webhooks/mono     # Your webhook endpoint
MONO_WEBHOOK_EVENTS=account.linked,transaction.created     # Comma-separated events to subscribe to

# ============================================================================
# END OF CONFIGURATION
# ============================================================================