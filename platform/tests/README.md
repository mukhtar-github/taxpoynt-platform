# TaxPoynt eInvoice Testing Framework

This directory contains a comprehensive testing framework for the TaxPoynt eInvoice system, focused on FIRS service integration.

## Overview

The testing framework is designed to verify the functionality of key components:

1. **FIRS API Integration** - Tests API endpoints and responses
2. **IRN Generation & Validation** - Tests the IRN format and validation rules
3. **Service Code Mapping** - Tests mapping between Odoo product categories and FIRS service codes
4. **End-to-End Flow** - Tests the complete invoice submission process

## Test Structure

- `framework/` - Contains the core testing utilities and helpers
  - `test_helpers.py` - General test helpers for FIRS API and IRN testing
  - `test_service_codes.py` - Tests for service code mapping and validation
- `reports/` - Contains test reports generated by the framework
- `run_all_tests.py` - Main script to run all tests

## Running Tests

### Run All Tests

```bash
./run_all_tests.py
```

This will run all test suites and generate JSON reports in the `reports/` directory.

### Generate HTML Reports

```bash
./run_all_tests.py --html
```

This will run all tests and generate both JSON and HTML reports.

### Run Specific Test Suites

Run only FIRS API tests:
```bash
./run_all_tests.py --api-only
```

Run only IRN generation and validation tests:
```bash
./run_all_tests.py --irn-only
```

Run only service code tests:
```bash
./run_all_tests.py --service-codes-only
```

## Test Reports

After running tests, reports are generated in the `reports/` directory:
- JSON reports contain detailed test results
- HTML reports provide a user-friendly visualization of test results

## Demo Instructions

For tomorrow's demo, follow these steps:

1. Open a terminal and navigate to the testing directory:
   ```bash
   cd /home/mukhtar-tanimu/taxpoynt-eInvoice/testing
   ```

2. Run the test suite with HTML reports:
   ```bash
   ./run_all_tests.py --html
   ```

3. Open the generated HTML report in a browser to display test results.

4. Explain each test category and how it validates the FIRS service integration:
   - FIRS API connectivity and reference data retrieval
   - IRN generation and validation according to specifications
   - Service code mapping intelligence from Odoo product categories
   - Validation rules for ensuring compliant invoices

5. Highlight any areas for improvement or further development.

## Extending the Framework

To add new tests:
1. Create new test modules in the `framework/` directory
2. Update the `run_all_tests.py` script to include the new tests
3. Run the tests to generate updated reports
